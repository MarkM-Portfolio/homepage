<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
        "http://www.springframework.org/dtd/spring-beans.dtd">
<!-- ***************************************************************** -->
<!--                                                                   -->
<!-- IBM Confidential                                                  -->
<!--                                                                   -->
<!-- OCO Source Materials                                              -->
<!--                                                                   -->
<!-- Copyright IBM Corp. 2009, 2015                                    -->
<!--                                                                   -->
<!-- The source code for this program is not published or otherwise    -->
<!-- divested of its trade secrets, irrespective of what has been      -->
<!-- deposited with the U.S. Copyright Office.                         -->
<!--                                                                   -->
<!-- ***************************************************************** -->

<beans>    
	<!-- In order to have the right bean initialization this must to be at the START -->
    <import resource="classpath:spring/home-news/database/DatabaseDao.xml"/>
	
	<!-- Define global advisor - we use AOP to manage lost connection and restoring them back -->
	<bean class="org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator" />

	<!--  DAO AOP Configuration  -->

	<!-- DAO Pointcut.  Matches all @Repository objects -->
	<bean id="com.ibm.lconn.homepage.dao.aop.HomepageDaoObjectMatcher"
		  class="com.ibm.lconn.homepage.dao.aop.HomepageDaoObjectMatcher"/>

	<!-- DAO Advise -->
	<bean id="com.ibm.lconn.homepage.dao.aop.RetryConnectionClosedPointcut"
		  class="org.springframework.aop.support.DefaultPointcutAdvisor">
		<property name="advice">
			<bean class="com.ibm.lconn.homepage.dao.aop.RetryConnectionClosedAdvise"/>
		</property>
		<property name="order" value="100000"/>
		<property name="pointcut"  	ref="com.ibm.lconn.homepage.dao.aop.HomepageDaoObjectMatcher"/>
	</bean>

    <bean id="uiDao" class="com.ibm.lconn.homepage.dao.ibatis.UIDao" parent="HPNEWS-DATABASE:crudDao">
    </bean>

    <bean id="widgetInstDao" class="com.ibm.lconn.homepage.dao.ibatis.WidgetInstDao" parent="HPNEWS-DATABASE:crudDao">
        <property name="deletedWidgetChecker" ref="deletedWidgetChecker"/> 		<!-- ref defined in ServicesContext in homepage.service.layer/core; TODO - move to Common after move to News  -->
    </bean>

	<bean id="tabInstDao" class="com.ibm.lconn.homepage.dao.ibatis.TabInstDao" parent="HPNEWS-DATABASE:crudDao">
    </bean>
    
    <bean id="systemMetricsDao" class="com.ibm.lconn.homepage.dao.ibatis.SystemMetricsDao" parent="HPNEWS-DATABASE:crudDao">
    </bean>
    
	<bean id="metricStatDao" class="com.ibm.lconn.homepage.dao.ibatis.MetricStatDao" parent="HPNEWS-DATABASE:crudDao">
    </bean>
	
	<bean id="homepageActionRequiredDao" class="com.ibm.lconn.homepage.dao.ibatis.HomepageActionRequiredDao" parent="HPNEWS-DATABASE:crudDao">
	</bean>
	                       
</beans>
